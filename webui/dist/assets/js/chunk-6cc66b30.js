(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cc66b30"],{2621:function(t,e){e.f=Object.getOwnPropertySymbols},"4d40":function(t,e,i){},5737:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{staticStyle:{display:"block",padding:"20px"}},[i("el-container",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{float:"right"},on:{click:function(e){t.openAddDialog()}}},[t._v("添加")]),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.sendConfig()}}},[t._v("送出")])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deviceData}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-container",{staticStyle:{display:"flex"}},[i("el-container",{staticStyle:{width:"50%"}},[i("DeviceTable",{attrs:{interfaceId:t.row.id}})],1),i("el-container",{staticStyle:{width:"50%"}},[i("ParamTable",{attrs:{interfaceId:t.row.id}})],1)],1)]}}])}),i("el-table-column",{attrs:{label:"ID",prop:"id"}}),i("el-table-column",{attrs:{label:"Device",prop:"interface.dev"}}),i("el-table-column",{attrs:{label:"Protocal",prop:"interface.protocal"}}),i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.openEditDialog(e.$index,e.row)}}},[t._v("Edit")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1),t.editDialogVisible?i("el-dialog",{attrs:{title:"提示",visible:t.editDialogVisible,width:"30%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[i("InterfaceEditForm",{attrs:{InterfaceId:t.editInterfaceId}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDialogVisible=!1}}},[t._v("關閉")])],1)],1):t._e(),t.addDialogVisible?i("el-dialog",{attrs:{title:"Interface 設置",visible:t.addDialogVisible,width:"30%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[i("InterfaceAddForm"),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!1}}},[t._v("關閉")])],1)],1):t._e()],1)},n=[],o=(i("f751"),i("cadf"),i("551c"),i("097d"),i("883a")),l=i("204d"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",[i("el-form-item",{attrs:{label:"ID"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("el-input",{model:{value:t.InterfaceId,callback:function(e){t.InterfaceId=e},expression:"InterfaceId"}})],1),i("el-col",{staticClass:"line",attrs:{span:2}},[t._v(" - ")]),i("el-col",{attrs:{span:12}},[i("el-select",{attrs:{placeholder:"type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})))],1)],1)],1),i("el-form",t._l(t.wifiForm,(function(e,a){return i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"wifi"==t.type,expression:"type=='wifi'"}],key:a,attrs:{label:a}},[i("el-input",{model:{value:t.wifiForm[a],callback:function(e){t.$set(t.wifiForm,a,e)},expression:"wifiForm[index]"}})],1)}))),i("el-form",t._l(t.rs485Form,(function(e,a){return i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"rs485"==t.type,expression:"type=='rs485'"}],key:a,attrs:{label:a}},[i("el-input",{model:{value:t.rs485Form[a],callback:function(e){t.$set(t.rs485Form,a,e)},expression:"rs485Form[index]"}})],1)}))),i("el-form-item",[i("el-button",{attrs:{disabled:!t.type,type:"primary"},on:{click:t.confirmAdd}},[t._v("创建")])],1)],1)},r=[],c={data:function(){return{InterfaceId:"",options:[{value:"wifi",label:"wifi"},{value:"rs485",label:"rs485"}],wifiForm:{dev:"wifi",ip:"192.168.1.115",port:"1221",protocal:"modbus",interval:"5000"},rs485Form:{dev:"rs485",tty:"/dev/ttymxc4",baud:"9600",databit:"8",stopbit:"1",parity:"none",protocal:"modbus",interval:"5000"},type:null}},methods:{confirmAdd:function(){console.log("add confirm! data: "+JSON.stringify(this.wifiForm)),console.log("add confirm! data: "+JSON.stringify(this.rs485Form)),"wifi"==this.type?this.$store.commit("addInterface",{id:this.InterfaceId,data:this.wifiForm}):"rs485"==this.type?this.$store.commit("addInterface",{id:this.InterfaceId,data:this.rs485Form}):console.log("confirmAdd type error: "+this.type+" is nota valid type")}}},d=c,m=i("2877"),f=Object(m["a"])(d,s,r,!1,null,null,null);f.options.__file="InterfaceAddForm.vue";var u=f.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",[t.editable?t._e():i("el-button",{on:{click:function(e){t.editable=!t.editable}}},[t._v("Edit")]),t.editable?i("el-button",{on:{click:function(e){t.editable=!t.editable}}},[t._v("Done")]):t._e(),t.editable?i("el-button",{attrs:{type:"primary"},on:{click:t.confirmEdit}},[t._v("Confirm")]):t._e(),t._l(this.interfaceFormData,(function(e,a){return i("el-form-item",{key:a,attrs:{label:a}},[i("el-input",{attrs:{disabled:!t.editable},model:{value:t.interfaceFormData[a],callback:function(e){t.$set(t.interfaceFormData,a,e)},expression:"interfaceFormData[index]"}})],1)}))],2)},p=[],h={data:function(){return{editable:!1,interfaceFormData:{}}},props:{InterfaceId:String},computed:{interfaceFormDataFromStatus:function(){return this.$store.state.config.all[this.InterfaceId].interface}},created:function(){this.interfaceFormData=this.interfaceFormDataFromStatus},methods:{confirmEdit:function(){this.editable=!this.editable,console.log("new interface data: ",JSON.stringify(this.interfaceFormData)),console.log('call mutation "setInterface"'),this.$store.commit("setInterface",{id:this.InterfaceId,data:this.interfaceFormData}),console.log(this.$store.state.config.all[this.InterfaceId].interface)}}},v=h,y=Object(m["a"])(v,b,p,!1,null,null,null);y.options.__file="InterfaceEditForm.vue";var g=y.exports,k={data:function(){return{addDialogVisible:!1,editDialogVisible:!1,editInterfaceData:{}}},components:{DeviceTable:o["a"],ParamTable:l["a"],InterfaceAddForm:u,InterfaceEditForm:g},computed:{deviceData:function(){return this.$store.state.config.all},deviceInfo:function(){return console.log(Object.assign({},this.$store.state.config.my,this.$store.state.config.mqtt)),Object.assign({},this.$store.state.config.my,this.$store.state.config.mqtt)}},methods:{openAddDialog:function(){this.addDialogVisible=!0},openEditDialog:function(t,e){console.log(t,e),this.editInterfaceId=t,this.editDialogVisible=!0,console.log(this.editInterfaceId)},handleDelete:function(t,e){console.log(t,e)},sendConfig:function(){console.log(this.$store.state.config)}},created:function(){this.device=this.$route.params.device,console.log(this.device),this.$store.commit("initState",{config:{my:{id:this.device},mqtt:{ip:"52.197.39.218",client:"kaso8467",port:"1883"},all:[{id:"1",interface:{dev:"wifi",ip:"192.168.1.115",port:"1221",protocal:"modbus",interval:"5000"},devices:[{id:"1",fun:"3",start:"0",length:"4"}],param:[{id:"TEMP",name:"temperature",dev:"1",min:"0",max:"100",unit:"°C",value:[{byte:"4",shift:"",mask:""},{byte:"3",shift:"",mask:""}],scale:"10"},{id:"HUM",name:"humidity",dev:"1",min:"0",max:"100",unit:"%",value:[{byte:"6",shift:"",mask:""},{byte:"5",shift:"",mask:""}],scale:"10"},{id:"CO2",name:"CO2",dev:"1",min:"0",max:"3000",unit:"ppm",value:[{byte:"8",shift:"",mask:""},{byte:"7",shift:"",mask:""}],scale:"1"},{id:"NH3",name:"Ammonia",dev:"1",min:"0",max:"3000",unit:"ppm",value:[{byte:"10",shift:"",mask:""},{byte:"9",shift:"",mask:""}],scale:"100"}]},{id:"2",interface:{dev:"wifi",ip:"192.168.1.115",port:"1222",protocal:"auto",scale:"1"},param:[{id:"WDIR",name:"wind direction",dev:"",min:"0",max:"360",unit:"°",value:[{byte:"2",shift:"",mask:""},{byte:"3",shift:"7",mask:"1"}]},{id:"LOW",name:"power low",dev:"",min:"0",max:"1",unit:" ",value:[{byte:"3",shift:"3",mask:"1"}],scale:"1"},{id:"OTEMP",name:"out door temperature",dev:"",min:"0",max:"100",unit:"°C",value:[{byte:"4",shift:"",mask:""},{byte:"3",shift:"",mask:"7"}],scale:"10"},{id:"OHUM",name:"out door humidity",dev:"",min:"0",max:"100",unit:"%",value:[{byte:"5",shift:"",mask:""}],scale:"1"},{id:"WIND",name:"wind speed",dev:"",min:"0",max:"100",unit:"m/s",value:[{byte:"6",shift:"",mask:""}],scale:"7.299"},{id:"QWIND",name:"instance wind speed",dev:"",min:"0",max:"100",unit:"m/s",value:[{byte:"7",shift:"",mask:""}],scale:"0.9"},{id:"RAIN",name:"rain",dev:"",min:"0",max:"100",unit:"mm",value:[{byte:"9",shift:"",mask:""},{byte:"8",shift:"",mask:""}],scale:"0.9"}]},{id:"3",interface:{dev:"rs485",tty:"/dev/ttymxc4",baud:"9600",databit:"8",stopbit:"1",parity:"none",protocal:"modbus",interval:"5000"},devices:[{id:"15",fun:"3",start:"0",length:"2"},{id:"24",fun:"3",start:"0",length:"2"}],param:[{id:"TEMP15",dev:"15",name:"temperature15",min:"0",max:"100",unit:"°C",value:[{byte:"6",shift:"",mask:""},{byte:"5",shift:"",mask:""}],scale:"10"},{id:"HUM15",name:"humidity15",dev:"15",min:"0",max:"100",unit:"%",value:[{byte:"4",shift:"",mask:""},{byte:"3",shift:"",mask:""}],scale:"10"},{id:"TEMP24",dev:"24",name:"temperature24",min:"0",max:"100",unit:"°C",value:[{byte:"6",shift:"",mask:""},{byte:"5",shift:"",mask:""}],scale:"10"},{id:"HUM24",name:"humidity24",dev:"24",min:"0",max:"100",unit:"%",value:[{byte:"4",shift:"",mask:""},{byte:"3",shift:"",mask:""}],scale:"10"}]}]}})}},I=k,w=(i("c49d"),Object(m["a"])(I,a,n,!1,null,"f88d53a2",null));w.options.__file="InterfaceTable.vue";e["default"]=w.exports},73334:function(t,e,i){"use strict";var a=i("0d58"),n=i("2621"),o=i("52a7"),l=i("4bf8"),s=i("626a"),r=Object.assign;t.exports=!r||i("79e5")((function(){var t={},e={},i=Symbol(),a="abcdefghijklmnopqrst";return t[i]=7,a.split("").forEach((function(t){e[t]=t})),7!=r({},t)[i]||Object.keys(r({},e)).join("")!=a}))?function(t,e){var i=l(t),r=arguments.length,c=1,d=n.f,m=o.f;while(r>c){var f,u=s(arguments[c++]),b=d?a(u).concat(d(u)):a(u),p=b.length,h=0;while(p>h)m.call(u,f=b[h++])&&(i[f]=u[f])}return i}:r},c49d:function(t,e,i){"use strict";var a=i("4d40"),n=i.n(a);n.a},f751:function(t,e,i){var a=i("5ca1");a(a.S+a.F,"Object",{assign:i("73334")})}}]);
//# sourceMappingURL=chunk-6cc66b30.js.map