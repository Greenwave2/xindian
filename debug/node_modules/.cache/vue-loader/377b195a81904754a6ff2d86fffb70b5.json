{"remainingRequest":"/Users/alex/kaso-agri/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alex/kaso-agri/src/components/EnvironmentalHistory.vue?vue&type=style&index=0&id=7a530ed4&lang=scss&scoped=true&","dependencies":[{"path":"/Users/alex/kaso-agri/src/components/EnvironmentalHistory.vue","mtime":1569746333000},{"path":"/Users/alex/kaso-agri/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/alex/kaso-agri/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/alex/kaso-agri/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/alex/kaso-agri/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/alex/kaso-agri/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/kaso-agri/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#HistoricalData {\r\n  overflow: hidden;\r\n  text-align: left;\r\n}\r\n.border-top-gray {\r\n  border-top: 1px solid #ebedf4;\r\n  .second-title {\r\n    padding: 30px 31px 8px;\r\n    font-family: PingFangSC-Regular;\r\n    font-size: 20px;\r\n    color: #31394d;\r\n    letter-spacing: 0;\r\n    &.echartsTime {\r\n      border-bottom: 1px solid #ebedf4;\r\n    }\r\n  }\r\n}\r\n.history {\r\n  .history-message {\r\n    padding: 0 31px 26px;\r\n    .input-time-line {\r\n      padding: 15px;\r\n    }\r\n  }\r\n  .check-list {\r\n    overflow: hidden;\r\n    display: block;\r\n  }\r\n  .submit-button {\r\n    display: block;\r\n    text-align: center;\r\n    margin: 26px auto 10px;\r\n    .clear-title {\r\n      padding-right: 20px;\r\n      font-family: PingFangSC-Regular;\r\n      font-size: 14px;\r\n      color: rgba(0, 0, 0, 0.65);\r\n      letter-spacing: 0;\r\n    }\r\n    .el-button--success {\r\n      border-color: #00cc99;\r\n      background-color: #00cc99;\r\n    }\r\n  }\r\n\r\n  .el-carousel-record {\r\n    &.el-carousel {\r\n      @media (min-width: 998px) {\r\n        margin: 20px 74px 71px;\r\n        width: 82%;\r\n      }\r\n      @media (min-width: 1024px) {\r\n        margin: 20px 84px 71px;\r\n        width: 80.5%;\r\n      }\r\n      @media (min-width: 1050px) {\r\n        margin: 20px 96px 71px;\r\n        width: 78%;\r\n      }\r\n      @media (min-width: 1070px) {\r\n        margin: 20px 105px 71px;\r\n        width: 75%;\r\n      }\r\n      @media (min-width: 1280px) {\r\n        margin: 20px 115px 71px;\r\n        width: 75%;\r\n      }\r\n      .carousel-text {\r\n        position: relative;\r\n        top: -28px;\r\n        left: -5px;\r\n        text-align: right;\r\n        .img-time {\r\n          font-family: PingFangSC-Regular;\r\n          font-size: 14px;\r\n          color: rgba(255, 255, 255, 0.8);\r\n          letter-spacing: 0;\r\n          padding-right: 10px;\r\n        }\r\n        .img-load {\r\n          opacity: 0.8;\r\n          font-family: PingFangSC-Regular;\r\n          font-size: 14px;\r\n          color: #ffffff;\r\n          text-align: left;\r\n        }\r\n        .el-icon-download {\r\n          color: rgba(255, 255, 255, 0.8);\r\n          border-radius: 1px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .ipcam_slide_show {\r\n    width: 640px;\r\n    height: 360px;\r\n  }\r\n}\r\n",{"version":3,"sources":["EnvironmentalHistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"EnvironmentalHistory.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"bg-write history environmentalHistory\">\r\n    <div\r\n      class=\"second-title\"\r\n      :style=\"{margin:'0 0 16px',padding: '26px 31px 0'}\"\r\n    >{{$t(\"History_Enviroment_Label\")}}</div>\r\n    <el-form ref=\"form\" label-width=\"80px\" class=\"history-message text-align-left\">\r\n      <div class=\"block text-align-left\" :style=\"{display:'inline-flex'}\">\r\n        <!-- 2019-03-04 時間の変更 -->\r\n        <!-- <el-date-picker format=\"yyyy-MM-dd HH:mm\"\r\n          v-model=\"historyStartTime\"\r\n          type=\"datetime\"\r\n          :placeholder=\"history_start_time_paceholder\"\r\n          prefix-icon=\"el-icon-date\"\r\n          style=\"width:200px\"\r\n          @change=\"dataTimeChange\"\r\n        ></el-date-picker>\r\n        <span class=\"input-time-line\">-</span>\r\n        <el-date-picker format=\"yyyy-MM-dd HH:mm\"\r\n          v-model=\"historyStopTime\"\r\n          type=\"datetime\"\r\n          :placeholder=\"history_end_time_paceholder\"\r\n          prefix-icon=\"el-icon-date\"\r\n          style=\"width:200px\"\r\n          @change=\"dataTimeChange\"\r\n        ></el-date-picker> -->\r\n         <div class=\"input-date\" >\r\n          <div class=\"input-append date form_datetime\">\r\n            <input class=\"input-time\" size=\"16\" type=\"text\" :placeholder=\"history_start_time_paceholder\" id=\"historyStartTime\" :style=\"{width:'200px','padding-left':'9px'}\">\r\n            <span class=\"add-on\"> <i class=\"icon-calendar\"></i> </span>\r\n          </div>\r\n         </div>\r\n         <span class=\"input-time-line\" :style=\"{'padding':'5px 15px'}\">-</span>\r\n         <div class=\"input-date\" >\r\n          <div class=\"input-append date form_datetime\">\r\n            <input class=\"input-time\" size=\"16\" type=\"text\" :placeholder=\"history_end_time_paceholder\" id=\"historyStopTime\" :style=\"{width:'200px','padding-left':'9px'}\">\r\n            <span class=\"add-on\"> <i class=\"icon-calendar\"></i> </span>\r\n         </div>\r\n        </div>\r\n      </div>\r\n      <div id=\"day-error-msg\" style=\"margin-top:10px;\" :style=\"{display:isDayErrorMsg}\">\r\n        <el-alert title=\"開始時刻と終了時刻を選んでください\" type=\"error\"></el-alert>\r\n      </div>\r\n      <div class=\"check-list text-align-left\">\r\n        <el-checkbox-group v-model=\"checkList.historyData\">\r\n          <el-checkbox\r\n            v-for=\"item in checkboxs\"\r\n            :key=\"item.id\"\r\n            :label=\"item.label\"\r\n            name=\"historyData\"\r\n            :style=\"item.style\"\r\n            :disabled=\"item.disabled\"\r\n            v-model=\"item.checked\"\r\n            @change=\"historyDataChange(item)\"\r\n          ></el-checkbox>\r\n        </el-checkbox-group>\r\n      </div>\r\n      <div id=\"day-error-msg\" style=\"margin-top:10px;\" :style=\"{display:isSensorErrorMsg}\">\r\n        <el-alert title=\"センサーデータを選んでください\" type=\"error\"></el-alert>\r\n      </div>\r\n      <div class=\"submit-button\">\r\n        <el-button\r\n          type=\"success\"\r\n          @click=\"environmentalHistoryCurve2\"\r\n          :style=\"{width:'80px',height:'36px',padding:'0'}\"\r\n        >{{$t(\"History_Search_Label\")}}</el-button>\r\n\r\n        <el-button\r\n          type=\"success\"\r\n          @click=\"environmentalHistoryCVS\"\r\n          :style=\"{width:'140px',height:'36px',padding:'0'}\"\r\n        >{{$t(\"History_CSV_Label\")}}</el-button>\r\n      </div>\r\n    </el-form>\r\n\r\n    <div class=\"border-top-gray\">\r\n      <div class=\"second-title\">\r\n        <span>{{between}}</span>\r\n      </div>\r\n      <div  v-loading=\"loading\" id=\"environmentalHistoryChart\" :style=\"{width:'100%', height: '500px','margin-bottom':'30px'}\"></div>\r\n      \r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport _$ from 'jquery'\r\nimport '../../public/static/datePicker/css/bootstrap.min.css'\r\nimport '../../public/static/datePicker/css/bootstrap-datetimepicker.min.css'\r\nimport '../../public/static/datePicker/js/bootstrap-datetimepicker.js'\r\nconst sensorFlag = false\r\nexport default {\r\n  sensorFlag,\r\n  name: 'EnvironmentalHistory',\r\n  data() {\r\n    return {\r\n      loginUser: '',\r\n      loading: false,\r\n      checkList: {\r\n        historyData: [],\r\n        typeTotal: [],\r\n      },\r\n      checkListType: {\r\n        temperature: false, //温度\r\n        humidity: false, //濕度\r\n        windSpeed: false, //风速\r\n        rainfall: false, //雨量\r\n        illumination: false, //照度\r\n        concentration: false, //浓度\r\n      },\r\n      //type: 1:温度,2:濕度,3:風向,4:風速,5:雨量,6:照度,7:浓度\r\n      checkboxs: [\r\n        {\r\n          id: '1',\r\n          label: this.$t('History_Param1_Label'),\r\n          type: 1,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'TEMP',\r\n        },\r\n        {\r\n          id: '2',\r\n          label: this.$t('History_Param2_Label'),\r\n          type: 2,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'HUM',\r\n        },\r\n        {\r\n          id: '3',\r\n          label: this.$t('History_Param3_Label'),\r\n          type: 7,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'CO2',\r\n        },\r\n        {\r\n          id: '4',\r\n          label: this.$t('History_Param4_Label'),\r\n          type: 6,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'LUM',\r\n        },\r\n        {\r\n          id: '5',\r\n          label: this.$t('History_Param5_Label'),\r\n          type: 3,\r\n          // style: { width: '150px' },\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'WDIR',\r\n        },\r\n        {\r\n          id: '6',\r\n          label: this.$t('History_Param6_Label'),\r\n          type: 4,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'WIND',\r\n        },\r\n        {\r\n          id: '7',\r\n          label: this.$t('History_Param7_Label'),\r\n          type: 4,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'QWIND',\r\n        },\r\n        {\r\n          id: '8',\r\n          label: this.$t('History_Param8_Label'),\r\n          type: 5,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'UVI',\r\n        },\r\n        {\r\n          id: '9',\r\n          label: this.$t('History_Param9_Label'),\r\n          type: 5,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'RAIN1',\r\n        },\r\n        {\r\n          id: '10',\r\n          label: this.$t('History_Param10_Label'),\r\n          type: 6,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'RAIN2',\r\n        },\r\n        {\r\n          id: '11',\r\n          label: this.$t('History_Param11_Label'),\r\n          type: 7,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'LIGHT',\r\n        },\r\n        {\r\n          id: '12',\r\n          label: this.$t('History_Param12_Label'),\r\n          type: 7,\r\n          // style: { width: '150px' },\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'LIGHT10',\r\n        },\r\n        {\r\n          id: '13',\r\n          label: this.$t('History_Param13_Label'),\r\n          type: 7,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'LIGHT2',\r\n        },\r\n        {\r\n          id: '14',\r\n          label: this.$t('History_Param14_Label'),\r\n          type: 2,\r\n          disabled: false,\r\n          checked: false,\r\n          dataStr: 'STMP',\r\n        },\r\n      ],\r\n      // 2019-03-04 時間の変更\r\n      // historyStartTime: '',\r\n      // historyStopTime: '',\r\n      history_start_time_paceholder: this.$t('History_Start_Time_PlaceHolder'),\r\n      history_end_time_paceholder: this.$t('History_End_Time_PlaceHolder'),\r\n      history_param_1: this.$t('History_Param1_Label'),\r\n      history_param_2: this.$t('History_Param2_Label'),\r\n      history_param_3: this.$t('History_Param3_Label'),\r\n      history_param_4: this.$t('History_Param4_Label'),\r\n      history_param_5: this.$t('History_Param5_Label'),\r\n      history_param_6: this.$t('History_Param6_Label'),\r\n      history_param_7: this.$t('History_Param7_Label'),\r\n      history_param_8: this.$t('History_Param8_Label'),\r\n      history_param_9: this.$t('History_Param9_Label'),\r\n      history_param_10: this.$t('History_Param10_Label'),\r\n      history_param_11: this.$t('History_Param11_Label'),\r\n      history_param_12: this.$t('History_Param12_Label'),\r\n      history_param_13: this.$t('History_Param13_Label'),\r\n      history_param_14: this.$t('History_Param14_Label'),\r\n      between: '',\r\n      isDayErrorMsg: 'none',\r\n      isSensorErrorMsg: 'none',\r\n    }\r\n  },\r\n created() {\r\n    \r\n    this.loginUser = this.$session.get('loginUser')\r\n   \r\n  },\r\n  methods: {\r\n    //時間表示スタイル\r\n    dateDefault() {\r\n      $('.form_datetime').datetimepicker({\r\n        language: 'jp',\r\n        format: 'yyyy-mm-dd hh:ii',\r\n        todayBtn: true, \r\n        autoclose: true, \r\n        showMeridian: 1, //時間表示スタイル\r\n        pickerPosition: 'bottom-right',\r\n      })\r\n    },\r\n    historyDataChange(item) {\r\n      var arr = this.checkList.typeTotal\r\n      item.checked = !item.checked\r\n      //選択する\r\n      if (item.checked) {\r\n        //判断是否选择センサーデータを判断するかどうかを判断する\r\n       this.sensorFlagData()\r\n\r\n        arr.push(item.type)\r\n        var newArr = this.arrUnique(arr)\r\n        if (newArr.length == 2) {\r\n          for (var index in this.checkboxs) {\r\n            if (newArr.indexOf(this.checkboxs[index].type) < 0) {\r\n              this.checkboxs[index].disabled = true\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        //判断是否选择センサーデータを判断するかどうかを判断する\r\n       this.sensorFlagData()\r\n\r\n        var j = arr.indexOf(item.type)\r\n\r\n        if (j > -1) {\r\n          arr.splice(j, 1)\r\n        }\r\n        var setArr = this.arrUnique(arr)\r\n        if (setArr.length < 2) {\r\n          for (var i in this.checkboxs) {\r\n            this.checkboxs[i].disabled = false\r\n          }\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 繰り返しデータを削除\r\n     * @param {Array} array\r\n     */\r\n    arrUnique(array) {\r\n      var r = []\r\n      for (var i = 0, l = array.length; i < l; i++) {\r\n        for (var j = i + 1; j < l; j++) if (array[i] == array[j]) j == ++i\r\n        r.push(array[i])\r\n      }\r\n      return r\r\n    },\r\n    dataTimeChange() {\r\n      this.isDayErrorMsg = 'none'\r\n    },\r\n    environmentalHistoryCVS() {\r\n      //2019-03-04 時間の変更\r\n      // var startiso = this.historyStartTime.toISOString()\r\n      // var endiso = this.historyStopTime.toISOString()\r\n\r\n      var startdt=new Date(_$('#historyStartTime').val().replace(/-/g,'/'))\r\n      var enddt=new Date(_$('#historyStopTime').val().replace(/-/g,'/'))\r\n      var startiso = startdt.toISOString()\r\n      var endiso = enddt.toISOString()\r\n\r\n      this.between = ''\r\n\r\n      var filedstr = 'F'\r\n\r\n      for (var i = 0; i < this.checkList.historyData.length; i++) {\r\n        // console.log(this.checkList.historyData[i])\r\n        if (this.checkList.historyData[i] == this.history_param_1) filedstr += '-LTMP'\r\n        if (this.checkList.historyData[i] == this.history_param_2) filedstr += '-OTMP'\r\n        if (this.checkList.historyData[i] == this.history_param_3) filedstr += '-LHM'\r\n        if (this.checkList.historyData[i] == this.history_param_4) filedstr += '-OHM'\r\n        if (this.checkList.historyData[i] == this.history_param_5) filedstr += '-WDIR'\r\n        if (this.checkList.historyData[i] == this.history_param_6) filedstr += '-WIND'\r\n        if (this.checkList.historyData[i] == this.history_param_7) filedstr += '-QWIND'\r\n        if (this.checkList.historyData[i] == this.history_param_8) filedstr += '-RAIN1'\r\n        if (this.checkList.historyData[i] == this.history_param_9) filedstr += '-RAIN2'\r\n        if (this.checkList.historyData[i] == this.history_param_10) filedstr += '-UVI'\r\n        if (this.checkList.historyData[i] == this.history_param_11) filedstr += '-LIGHT'\r\n        if (this.checkList.historyData[i] == this.history_param_12) filedstr += '-LIGHT10'\r\n        if (this.checkList.historyData[i] == this.history_param_13) filedstr += '-LIGHT2'\r\n        if (this.checkList.historyData[i] == this.history_param_14) filedstr += '-STMP'\r\n      }\r\n\r\n      window.open('http://www.iot-fitone.com/sensordata?gwid=' + this.loginUser + '&table=' + filedstr + '&start=' + startiso + '&end=' + endiso + '&csv=1')\r\n    },\r\n    getChartsYaxis() {\r\n      var arr = this.arrUnique(this.checkList.typeTotal)\r\n      var yAxis = []\r\n      for (var i in arr) {\r\n        switch (arr[i]) {\r\n          case 1:\r\n            yAxis.push({\r\n              type: 'value',\r\n              name: 'CO2 ppm',\r\n              custype: 1,\r\n              scale: true,\r\n            })\r\n            break\r\n          case 2:\r\n            yAxis.push({\r\n              type: 'value',\r\n              name: '濕度 %',\r\n              custype: 2,\r\n              scale: true,\r\n            })\r\n            break\r\n          case 3:\r\n            yAxis.push({\r\n              type: 'value',\r\n              name: '方位(°)',\r\n              custype: 3,\r\n              scale: true,\r\n            })\r\n            break\r\n          case 4:\r\n            yAxis.push({\r\n              type: 'value',\r\n              name: '風速(m/s)',\r\n              custype: 4,\r\n              scale: true,\r\n            })\r\n\r\n            break\r\n\r\n          case 5:\r\n            yAxis.push({\r\n              type: 'value',\r\n              name: '雨量(mm)',\r\n              custype: 5,\r\n              scale: true,\r\n            })\r\n\r\n            break\r\n          case 6:\r\n            yAxis.push({\r\n              type: 'value',\r\n              name: '紫外線(μw/cm²)',\r\n              custype: 6,\r\n              scale: true,\r\n            })\r\n            break\r\n          case 7:\r\n            yAxis.push({\r\n              type: 'value',\r\n              custype: 7,\r\n              name: '照度(lux)',\r\n              scale: true,\r\n            })\r\n            break\r\n        }\r\n      }\r\n\r\n      return yAxis\r\n    },\r\n    \r\n    sensorDayData() {\r\n      var historyStart=_$('#historyStartTime').val()\r\n      var historyEnd=_$('#historyStopTime').val()\r\n      //判断时刻是否选择時刻を判断するかどうかを判断する\r\n      if (\r\n        //2019-03-04 時間の変更\r\n        // this.historyStartTime == null ||\r\n        // this.historyStartTime == undefined ||\r\n        // this.historyStartTime == '' ||\r\n        // this.historyStopTime == null ||\r\n        // this.historyStopTime == undefined ||\r\n        // this.historyStopTime == ''\r\n         historyStart == null || historyStart == undefined || historyStart== '' || historyEnd == null ||historyEnd == undefined ||historyEnd == ''\r\n      ) {\r\n        this.isDayErrorMsg = 'block'\r\n        this.sensorFlag = false\r\n      } else {\r\n        this.isDayErrorMsg = 'none'\r\n        this.sensorFlag = true\r\n      }\r\n     \r\n    },\r\n     sensorFlagData(){\r\n     //判断是否选择センサーデータを判断するかどうかを判断する\r\n      if (this.checkList.historyData.length == 0) {\r\n        this.isSensorErrorMsg = 'block'\r\n        this.sensorFlag = false\r\n      } else {\r\n        this.isSensorErrorMsg = 'none'\r\n        this.sensorFlag = true\r\n      }\r\n    },\r\n    //判断是否选择「时刻」と「センサーデータ」を判断するかどうかを判断する\r\n    sensorData(){\r\n      this.sensorDayData()\r\n      this.sensorFlagData()\r\n    },\r\n    environmentalHistoryCurve2() {\r\n      \r\n      this.sensorData()\r\n      if (this.sensorFlag == false) {\r\n        return\r\n      }\r\n    \r\n      //2019-03-04 時間の変更\r\n      // var startiso = this.historyStartTime.toISOString()\r\n      // var endiso = this.historyStopTime.toISOString()\r\n\r\n      var startdt=new Date(_$('#historyStartTime').val().replace(/-/g,'/'))\r\n      var enddt=new Date(_$('#historyStopTime').val().replace(/-/g,'/'))\r\n      var startiso = startdt.toISOString()\r\n      var endiso = enddt.toISOString()\r\n\r\n      var urlstr = 'http://www.iot-fitone.com/sensordata?gwid=' + this.loginUser + '&table=LTMP&start=' + startiso + '&end=' + endiso\r\n      this.loading=true\r\n      this.$ajax({\r\n        method: 'GET',\r\n        url: urlstr,\r\n      }).then(res => {\r\n          var dataZoom=[{\r\n            show:true,\r\n          }]\r\n          var xAxis = [\r\n            {\r\n              type: 'category',\r\n              show: true,\r\n              axisLine: { onZero: false },\r\n              data: [],\r\n            },\r\n          ]\r\n          var legend = {\r\n            data: [],\r\n          }\r\n          var yAxis = this.getChartsYaxis()\r\n\r\n          var series = []\r\n          if (res.data) {\r\n            var resData = res.data\r\n            var hisData = this.checkList.historyData\r\n            for (var j in hisData) {\r\n              legend.data.push(hisData[j])\r\n              for (var m in this.checkboxs) {\r\n                if (hisData[j] === this.checkboxs[m].label) {\r\n                  var yIndex = 0\r\n                  if (yAxis[1] && yAxis[1].custype == this.checkboxs[m].type) {\r\n                    yIndex = 1\r\n                  }\r\n                  var seriesJosn = {\r\n                    type: 'line',\r\n                    yAxisIndex: yIndex,\r\n                    data: [],\r\n                  }\r\n                  var arr = this.arrUnique(this.checkList.typeTotal)\r\n                  arr.indexOf(this.checkboxs[m])\r\n                  xAxis[0].data = []\r\n                  for (var i = 0; i < resData.length; i++) {\r\n                   // xAxis[0].data.push(resData[i].showdate)\r\n                    xAxis[0].data.push(resData[i].showtime)\r\n                    seriesJosn.name = hisData[j]\r\n                    seriesJosn.data.push(resData[i].values[this.checkboxs[m].dataStr] || 0)\r\n                   //seriesJosn.data.push(resData[i].values.CO2)\r\n                  }\r\n                  series.push(seriesJosn)\r\n                }\r\n              }\r\n            }\r\n          }\r\n          let myChart = this.$echarts.init(document.getElementById('environmentalHistoryChart'))\r\n         \r\n          var option = {}\r\n\r\n          option.xAxis = xAxis\r\n          option.yAxis = yAxis\r\n          option.legend = legend\r\n          option.series = series\r\n          option.dataZoom=dataZoom\r\n\r\n          option.tooltip = {\r\n            trigger: 'axis',\r\n          }\r\n\r\n          myChart.clear()\r\n          myChart.setOption(option)\r\n          this.loading = false\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n          this.loading = false\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style  lang=\"scss\" scoped>\r\n#HistoricalData {\r\n  overflow: hidden;\r\n  text-align: left;\r\n}\r\n.border-top-gray {\r\n  border-top: 1px solid #ebedf4;\r\n  .second-title {\r\n    padding: 30px 31px 8px;\r\n    font-family: PingFangSC-Regular;\r\n    font-size: 20px;\r\n    color: #31394d;\r\n    letter-spacing: 0;\r\n    &.echartsTime {\r\n      border-bottom: 1px solid #ebedf4;\r\n    }\r\n  }\r\n}\r\n.history {\r\n  .history-message {\r\n    padding: 0 31px 26px;\r\n    .input-time-line {\r\n      padding: 15px;\r\n    }\r\n  }\r\n  .check-list {\r\n    overflow: hidden;\r\n    display: block;\r\n  }\r\n  .submit-button {\r\n    display: block;\r\n    text-align: center;\r\n    margin: 26px auto 10px;\r\n    .clear-title {\r\n      padding-right: 20px;\r\n      font-family: PingFangSC-Regular;\r\n      font-size: 14px;\r\n      color: rgba(0, 0, 0, 0.65);\r\n      letter-spacing: 0;\r\n    }\r\n    .el-button--success {\r\n      border-color: #00cc99;\r\n      background-color: #00cc99;\r\n    }\r\n  }\r\n\r\n  .el-carousel-record {\r\n    &.el-carousel {\r\n      @media (min-width: 998px) {\r\n        margin: 20px 74px 71px;\r\n        width: 82%;\r\n      }\r\n      @media (min-width: 1024px) {\r\n        margin: 20px 84px 71px;\r\n        width: 80.5%;\r\n      }\r\n      @media (min-width: 1050px) {\r\n        margin: 20px 96px 71px;\r\n        width: 78%;\r\n      }\r\n      @media (min-width: 1070px) {\r\n        margin: 20px 105px 71px;\r\n        width: 75%;\r\n      }\r\n      @media (min-width: 1280px) {\r\n        margin: 20px 115px 71px;\r\n        width: 75%;\r\n      }\r\n      .carousel-text {\r\n        position: relative;\r\n        top: -28px;\r\n        left: -5px;\r\n        text-align: right;\r\n        .img-time {\r\n          font-family: PingFangSC-Regular;\r\n          font-size: 14px;\r\n          color: rgba(255, 255, 255, 0.8);\r\n          letter-spacing: 0;\r\n          padding-right: 10px;\r\n        }\r\n        .img-load {\r\n          opacity: 0.8;\r\n          font-family: PingFangSC-Regular;\r\n          font-size: 14px;\r\n          color: #ffffff;\r\n          text-align: left;\r\n        }\r\n        .el-icon-download {\r\n          color: rgba(255, 255, 255, 0.8);\r\n          border-radius: 1px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .ipcam_slide_show {\r\n    width: 640px;\r\n    height: 360px;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n"]}]}